// 测试数组和结构体的常量折叠

// 测试 1: const 数组元素访问
fn test_const_array() -> i32 {
    let arr: [const i32; 3] = {10, 20, 30};
    return arr[1];
}

// 测试 2: const 数组多维
fn test_const_array_2d() -> i32 {
    let arr: [[const i32; 2]; 2] = {{1, 2}, {3, 4}};
    return arr[1][0];
}

// 测试 3: const struct 字段访问
struct Point {
    x: i32,
    y: i32,
}

fn test_const_struct() -> i32 {
    let p: const struct Point = {10, 20};
    return p.x + p.y;
}

// 测试 4: const 数组在表达式中
fn test_array_expr() -> i32 {
    let arr: [const i32; 3] = {5, 10, 15};
    return arr[0] + arr[1] + arr[2];
}

fn main() -> i32 {
    let result: i32 = test_const_array() + test_const_array_2d() 
                    + test_const_struct() + test_array_expr();
    return result;
}
